# Конфигурация Workflow для InBack.ru
# Автор: InBack.ru Team
# Дата создания: $(date)

# ОСНОВНОЙ WORKFLOW ДЛЯ ПРИЛОЖЕНИЯ
# ================================

Название workflow: "Start application"
Команда: gunicorn --bind 0.0.0.0:5000 --reuse-port --reload main:app
Порт: 5000
Тип вывода: webview
Описание: Основной веб-сервер приложения InBack.ru

# ИНСТРУКЦИИ ПО НАСТРОЙКЕ WORKFLOW В REPLIT:
# ==========================================

1. Откройте раздел "Workflows" в боковой панели Replit
2. Создайте новый workflow со следующими параметрами:
   - Name: Start application
   - Command: gunicorn --bind 0.0.0.0:5000 --reuse-port --reload main:app
   - Wait for port: 5000
   - Output type: webview

3. Убедитесь, что workflow настроен для автоматического запуска

# АЛЬТЕРНАТИВНЫЕ КОМАНДЫ ДЛЯ ЗАПУСКА:
# ===================================

# Для разработки с Flask dev server:
flask --app main run --host=0.0.0.0 --port=5000 --debug

# Для production с gunicorn:
gunicorn --bind 0.0.0.0:5000 --workers=4 --timeout=120 main:app

# Для отладки:
python main.py

# ДОПОЛНИТЕЛЬНЫЕ WORKFLOW (ПО НЕОБХОДИМОСТИ):
# ===========================================

# Workflow для фоновых задач:
# Название: "Background Tasks"
# Команда: python background_processor.py
# Тип вывода: console

# Workflow для Telegram бота:
# Название: "Telegram Bot"
# Команда: python telegram_bot.py
# Тип вывода: console

# ПРОВЕРКА РАБОТОСПОСОБНОСТИ:
# ===========================

После запуска workflow проверьте:
1. Приложение запустилось без ошибок
2. База данных подключается корректно
3. Статические файлы загружаются
4. API endpoints отвечают
5. Веб-интерфейс открывается в браузере

# РЕШЕНИЕ ПРОБЛЕМ:
# ================

Если workflow не запускается:
1. Проверьте переменные окружения (DATABASE_URL, SESSION_SECRET)
2. Убедитесь, что все зависимости установлены (pip install -r requirements.txt)
3. Проверьте права доступа к файлам
4. Просмотрите логи workflow для выявления ошибок

Если приложение запускается, но не работает:
1. Проверьте подключение к базе данных
2. Убедитесь, что таблицы созданы (запустите restore_database.sh)
3. Проверьте статические файлы и шаблоны
4. Убедитесь, что порт 5000 не заблокирован